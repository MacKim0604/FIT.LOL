# FIT.LOL v2.0.0 체크리스트

## 🚨 Critical (즉시 수정 필요)
- [ ] 인증을 Keycloak OIDC로 전환 - 세션 무효화/감사/권한 일관성 확보 - 게이트 도입, 토큰 검증(JWKS), /auth 폐기 계획
- [ ] Redis/DB SPOF 제거 - 전체 중단 방지 - Redis HA/Cluster, Postgres Multi-AZ
- [ ] 큐 멱등/중복 방지/지터 백오프/DLQ - 폭주/비용 폭탄 방지 - jobId, 지터 백오프, 재시도≤5, DLQ
- [ ] 서킷 브레이커/타임아웃 - 장애 전파 차단 - Riot/DB/Redis 별도 임계치 적용

## ⚠️ High (출시 전 반드시 해결)
- [ ] 레이트리미트 전역화 - 오남용·급증 트래픽 방지 - 게이트웨이+앱 미들웨어
- [ ] 백업/복구 자동화·리허설 - RPO/RTO 보장 - PITR/정기 복구 테스트
- [ ] 시크릿 매니지먼트 - 키 유출/회전 - Secret Manager + 최소권한 IAM
- [ ] 캐시 무효화 전략 - 정합성 - 태그/버전 키, 사전 계산

## 📝 Medium (운영하면서 개선)
- [ ] 파티셔닝/아카이빙 - 대용량 대비 - 월 파티션, S3 아카이브
- [ ] TeamSynergy 스키마 개선 - 조합 질의 효율 - 정규화 또는 해시키+GIN
- [ ] 원본 JSON 보존 - 재집계/회귀 - JSONB 또는 오브젝트 스토리지
- [ ] 관측 대시보드 - 근본원인 분석 - API/큐/DB/캐시 표준 대시보드

## 💡 Nice to Have (여유 있을 때)
- [ ] Feature Flags - 점진 배포/롤백 - 플래그 서비스 도입
- [ ] CDN 최적화 - 자산 로딩 향상 - 캐시 정책/압축/이미지 최적화
- [ ] WAF/CSP 강화 - 공격 표면 축소 - 룰세트/보안 헤더

---

## 장애 대응 체크리스트
- **먼저 확인**: 에러율, P95, 큐 pending/failed, Riot 429/5xx, DB 커넥션/락, Redis 메모리/eviction
- **필요 로그/지표**: RequestId, 라우트, 상태코드, 지연, JobLog 상태 전이, Riot 헤더, 슬로우쿼리
- **즉시 완화**: 서킷 오픈, 큐 소비 중지/완만화, 레이트리밋 상향, 읽기 전용 모드, 피처 플래그 비활성화
- **롤백**: Blue-Green/Canary, 마이그 다운 스크립트, 설정 롤백

## 성능 최적화 포인트
- 분석 API 사전 계산/머티리얼라이즈드 뷰, 최근 N 전용 인덱스
- 캐싱: 플레이어 카드/대시보드 태그 캐시, ETag/If-None-Match
- Riot 호출 절감: TTL 준수, 강제 갱신 쿨다운, 큐 dedup
