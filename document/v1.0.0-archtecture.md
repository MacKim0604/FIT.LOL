# FIT.LOL v1.0.0 Architecture Document

## 개요
FIT.LOL은 리그 오브 레전드 게임 데이터를 분석하여 사용자에게 피트니스와 게임 성과 간의 상관관계를 제공하는 마이크로서비스 기반 애플리케이션입니다.

## 아키텍처 구성 요소

### 1. UI (Frontend)
**역할:**
- 사용자 인터페이스 제공
- 사용자 인터랙션 처리
- 데이터 시각화 및 대시보드 제공

**개발 목표:**
- **기술 스택:** React.js 
- **사용자 경험 최적화:** 직관적이고 사용하기 쉬운 인터페이스
- **실시간 데이터 업데이트:** WebSocket을 통한 실시간 게임 데이터 표시
- **데이터 시각화:** Chart.js를 활용한 게임 성과 및 피트니스 데이터 차트

### 2. Gateway (API Gateway)
**역할:**
- 클라이언트 요청의 중앙 진입점
- 라우팅 및 로드 밸런싱
- 인증 및 권한 부여
- 요청/응답 로깅 및 모니터링

**개발 목표:**
- **기술 스택:** Kong, Zuul, 또는 Spring Cloud Gateway
- **보안:** JWT 토큰 기반 인증, CORS 정책 관리
- **API 버전 관리:** 하위 호환성 보장
- **Rate Limiting:** API 사용량 제한 및 DDoS 방어
- **로깅 및 모니터링:** 모든 API 호출 추적 및 성능 메트릭 수집

### 3. LolAPIGateway (LoL API 전용 게이트웨이)
**역할:**
- Riot API 호출 전용 게이트웨이
- API 키 관리 및 요청 제한 처리


**개발 목표:**
- **기술 스택:** Node.js 
- **Rate Limiting:** Riot API 제한 사항 준수
- **에러 핸들링:** Riot API 에러 코드에 따른 적절한 재시도 로직
- **API 키 로테이션:** 보안을 위한 API 키 주기적 교체
- **모니터링:** API 사용량 및 응답 시간 모니터링
- **Lol 데이터 용 Gateway:** 
    - LOL 관련 데이터 처리 시, Riot API 호출을 위한 전용 게이트웨이로 사용
    - 1순위로 DB 검색 이후 특정 예외적인 상황에만 Riot API 호출
    - 스케쥴링을 통해 지속적으로 클랜원 데이터를 가져와, Riot API 호출을 통해 데이터를 DB에 수시로 저장

### 4. UserService (사용자 서비스)
**역할:**
- 클랜원 프로필 정보 저장 및 관리

**개발 목표:**
- **기술 스택:** Express.js (Node.js)
- **데이터베이스:** PostgreSQL 
- **인증:** OAuth 2.0, JWT 토큰 기반 인증
- **사용자 프로필:** 게임 계정 연동, 피트니스 데이터 입력 기능
- **보안:** 없음음
- **API 설계:** RESTful API

### 5. AnalysisService (분석 서비스)
**역할:**
- 게임 데이터와 피트니스 데이터 상관관계 분석
- 통계 및 인사이트 생성

**개발 목표:**
- **기술 스택:** Python (FastAPI, Flask)
- **데이터 분석:** pandas, numpy, scipy
- **통계 분석:** 게임 성과와 피트니스 지표 간 상관관계 분석
- **실시간 분석:** 스트리밍 데이터 처리 (Apache Kafka, Apache Spark)
- **시각화 데이터:** 프론트엔드에서 사용할 차트 데이터 생성

### 6. LolAPIService (LoL API 서비스)
**역할:**
- Riot Games API와의 직접적인 통신
- 게임 데이터 수집 및 전처리
- API 응답 데이터 정규화

**개발 목표:**
- **기술 스택:** Node.js 
- **API 통합:** Riot Games API v4 완전 지원
- **데이터 수집:** 소환사 정보, 매치 히스토리, 랭크 정보, 챔피언 통계
- **데이터 전처리:** 원시 API 데이터를 분석 가능한 형태로 변환
- **배치 처리:** 대량 데이터 수집을 위한 배치 작업 스케줄링
- **에러 복구:** API 장애 시 자동 재시도 및 복구 메커니즘
- **데이터 검증:** 수집된 데이터의 무결성 검증

### 7. LolDataService (LoL 데이터 서비스)
**역할:**
- 게임 데이터 저장 및 관리
- 데이터 조회 API 제공
- 데이터 정합성 보장

**개발 목표:**
- **기술 스택:** Express.js
- **데이터베이스:** PostgreSQL (관계형 데이터)
- **데이터 모델링:** 효율적인 게임 데이터 스키마 설계
- **인덱싱:** 빠른 데이터 조회를 위한 적절한 인덱스 설계
- **데이터 아카이빙:** 오래된 데이터의 효율적인 보관 및 관리
- **백업 및 복구:** 정기적인 데이터 백업 및 재해 복구 계획
- **API 최적화:** 대용량 데이터 조회 시 페이징 및 필터링 지원

### 8. Database (데이터베이스)
**역할:**
- 모든 애플리케이션 데이터 저장
- 데이터 무결성 보장
- 성능 최적화

**개발 목표:**
- **주 데이터베이스:** PostgreSQL (ACID 트랜잭션 지원)
- **데이터 모델링:** 정규화된 스키마 설계
- **성능 최적화:** 쿼리 최적화, 인덱스 튜닝
- **확장성:** 읽기 전용 복제본 구성
- **모니터링:** 데이터베이스 성능 및 상태 모니터링

## 기술 스택 권장사항

### Backend
- **언어:** Node.js (Express)
- **데이터베이스:** PostgreSQL, Redis
- **컨테이너:** Docker, Kubernetes

### Frontend
- **프레임워크:** React.js
- **언어:** TypeScript
- **상태 관리:** Redux 또는 Vuex
- **UI 라이브러리:** Material-UI 또는 Ant Design

### DevOps
- **CI/CD:** GitHub Actions 또는 Jenkins
- **모니터링:** Prometheus, Grafana
- **로깅:** ELK Stack (Elasticsearch, Logstash, Kibana)
- **클라우드:** AWS, GCP, 또는 Azure

## 개발 우선순위

### Phase 1 (MVP)
1. UserService - 기본 사용자 관리
2. LolAPIService - Riot API 연동
3. LolDataService - 기본 데이터 저장
4. UI - 기본 대시보드

### Phase 2 (분석 기능)
1. AnalysisService - 기본 통계 분석
2. Gateway - API 게이트웨이 구축
3. 고급 UI 기능

### Phase 3 (최적화 및 확장)
1. LolAPIGateway - 전용 게이트웨이
2. 성능 최적화
3. 고급 분석 기능
4. 모바일 앱 개발